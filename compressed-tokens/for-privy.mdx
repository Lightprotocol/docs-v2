---
title: "Rent-Free SPL Accounts with Privy"
sidebarTitle: "For Privy Wallets"
description: "Integrate compressed tokens with Privy embedded wallets for rent-free SPL token accounts and transfers."
keywords: ["privy solana", "privy compressed tokens", "embedded wallet compression", "rent-free tokens privy"]
---
import Toolkits2Setup from "/snippets/setup/toolkits2-setup.mdx";
import TransferNodejs from "/snippets/code-snippets/privy/transfer/nodejs.mdx";
import TransferReact from "/snippets/code-snippets/privy/transfer/react.mdx";
import CompressNodejs from "/snippets/code-snippets/privy/compress/nodejs.mdx";
import CompressReact from "/snippets/code-snippets/privy/compress/react.mdx";
import DecompressNodejs from "/snippets/code-snippets/privy/decompress/nodejs.mdx";
import DecompressReact from "/snippets/code-snippets/privy/decompress/react.mdx";
import BalancesNodejs from "/snippets/code-snippets/privy/balances/nodejs.mdx";
import BalancesReact from "/snippets/code-snippets/privy/balances/react.mdx";
import TransactionHistoryNodejs from "/snippets/code-snippets/privy/transaction-history/nodejs.mdx";
import TransactionHistoryReact from "/snippets/code-snippets/privy/transaction-history/react.mdx";
import ActionCode from '/snippets/code-snippets/compressed-token/create-mint/action.mdx';
import AiPromptNodejs from "/snippets/ai-prompts/privy-nodejs-compressed.mdx";
import AiPromptReact from "/snippets/ai-prompts/privy-react-compressed.mdx";

| Creation Cost | SPL Token Account | Compressed Token |
| :------------ | :---------------- | :--------------- |
| **Per account** | ~2,000,000 lamports | ~**5,000** lamports |

Privy handles user authentication and wallet management. You build transactions with tokens (SOL, SPL or compressed) and Privy signs them client-side:

1. Authenticate with Privy 
2. Build unsigned transaction 
4. Sign transaction using Privy's wallet provider
5. Send signed transaction to RPC

## What you will implement
<table>
  <thead>
    <tr>
      <th style={{ width: "20%" }}></th>
      <th>SPL</th>
      <th>Compressed </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>[**Transfer**](#full-code-examples)</td>
      <td>transferChecked()</td>
      <td>transfer()</td>
    </tr>
    <tr>
      <td>[**Compress**](#full-code-examples)</td>
      <td>N/A</td>
      <td>compress()</td>
    </tr>
    <tr>
      <td>[**Decompress**](#full-code-examples)</td>
      <td>N/A</td>
      <td>decompress()</td>
    </tr>
    <tr>
      <td>[**Get Balance**](#get-balances)</td>
      <td>getAccount()</td>
      <td>getCompressedTokenAccountsByOwner()</td>
    </tr>
    <tr>
      <td>[**Transaction History**](#get-transaction-history)</td>
      <td>getSignaturesForAddress()</td>
      <td>getCompressionSignaturesForOwner()</td>
    </tr>
  </tbody>
</table>

<Tabs>
<Tab title="Guide">
<Steps>
<Step>
### Prerequisites

<Toolkits2Setup />

Connect to an RPC endpoint that supports ZK Compression (Helius, Triton)
```typescript
import { createRpc } from "@lightprotocol/stateless.js";

import {
  transfer,
  compress,
  decompress,
  selectMinCompressedTokenAccountsForTransfer,
} from "@lightprotocol/compressed-token";

const rpc = createRpc(RPC_ENDPOINT);
```

<Accordion title="Setup test mint">


<Info>
Before we call compress or decompresss, we need:

* An SPL mint with a interface PDA for compression. This PDA can be created for new SPL mints via [`createMint()`](/compressed-tokens/guides/create-mint-with-token-pool) or added to existing SPL mints via [`createTokenPool()`](/compressed-tokens/guides/add-token-pools-to-mint-accounts).
* For `compress()` SPL tokens in an Associated Token Account, or
* For `decompress()` compressed token accounts with sufficient balance.
</Info>

<ActionCode />

</Accordion>
</Step>
<Step>
## Full Code Examples

<Info>
Find complete examples on Github: [nodejs](https://github.com/Lightprotocol/examples-zk-compression/tree/main/privy/nodejs-privy-compressed) and [react](https://github.com/Lightprotocol/examples-zk-compression/tree/main/privy/react-privy-compressed).
</Info>

<Tabs>
<Tab title="Compressed Transfer">

Send compressed tokens to another recipient, similar to SPL token transfers:

1. Fetch compressed token accounts with `getCompressedTokenAccountsByOwner`
2. Select sender accounts with `selectMinCompressedTokenAccountsForTransfer`
3. Fetch a validity proof from your RPC provider to prove the account's state correctness
4. Build the transfer instruction and transaction
5. Sign with Privy and send transaction

<Tabs>
<Tab title="Node.js">
<TransferNodejs />
</Tab>
<Tab title="React">
<TransferReact />
</Tab>
</Tabs>

</Tab>

<Tab title="Compress SPL to Recipient">

Convert SPL to compressed tokens and send to a recipient in one instruction.

<Tabs>
<Tab title="Node.js">
<CompressNodejs />
</Tab>
<Tab title="React">
<CompressReact />
</Tab>
</Tabs>

</Tab>

<Tab title="Decompress (Offramp)">

Convert compressed tokens back to SPL tokens.

<Tabs>
<Tab title="Node.js">
<DecompressNodejs />
</Tab>
<Tab title="React">
<DecompressReact />
</Tab>
</Tabs>

</Tab>
</Tabs>

</Step>
</Steps>
## Get balances

Fetch SPL and compressed token balances.

<Tabs>
<Tab title="Node.js">
<BalancesNodejs />
</Tab>
<Tab title="React">
<BalancesReact />
</Tab>
</Tabs>

## Get transaction history

Fetch compressed token transaction history for an owner, with optional detailed compression information.

<Tabs>
<Tab title="Node.js">
<TransactionHistoryNodejs />
</Tab>
<Tab title="React">
<TransactionHistoryReact />
</Tab>
</Tabs>
</Tab>

<Tab title="AI Prompt">
<Tabs>
<Tab title="Node.js">
<AiPromptNodejs />
</Tab>
<Tab title="React">
<AiPromptReact />
</Tab>
</Tabs>
</Tab>
</Tabs>
