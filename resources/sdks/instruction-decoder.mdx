---
title: Instruction Decoder
description: Decode instruction data for test logging
---

## Overview

The instruction decoder crate decodes raw instruction data into named fields for logging during tests. Off-chain only.

## Installation

```toml
[dependencies]
light-instruction-decoder = "0.1.0"
```

## Usage

### Derive macro for instruction enums

```rust
use light_instruction_decoder_derive::InstructionDecoder;

#[derive(InstructionDecoder)]
#[instruction_decoder(
    program_id = "MyProgram11111111111111111111111111111111111",
    program_name = "My Program"
)]
pub enum MyInstruction {
    #[instruction_decoder(accounts = CreateRecord)]
    CreateRecord,
}
```

### Attribute macro for Anchor programs

```rust
use light_instruction_decoder_derive::instruction_decoder;

#[instruction_decoder]
#[program]
pub mod my_program {
    pub fn create_record(ctx: Context<CreateRecord>) -> Result<()> {
        // ...
    }
}
```

### Register with test config

```rust
let config = ProgramTestConfig::new()
    .add_decoder(MyProgramInstructionDecoder::default());
```

## Configuration

| Attribute | Description |
|-----------|-------------|
| `program_id` | Program address |
| `program_name` | Display name (optional) |
| `discriminator_size` | 1, 4, or 8 bytes (default: 8) |
| `accounts` | Struct to extract account names from |
| `params` | Struct for parameter deserialization |

## API reference

See [docs.rs/light-instruction-decoder](https://docs.rs/light-instruction-decoder)