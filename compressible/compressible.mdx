---
title: Compressible
description: The compressible extension sponsors rent-exemption for any type of Solana account except mints. 
---

<table>
  <thead>
    <tr>
      <th style={{width: '20%', textAlign: 'left'}}></th>
      <th style={{width: '20%', textAlign: 'left'}}>Supported Accounts</th>
      <th style={{width: '45%', textAlign: 'left'}}>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style={{textAlign: 'left'}}>**Compressible**</td>
      <td style={{textAlign: 'left'}}>
        cToken accounts
      </td>
      <td style={{textAlign: 'left'}}>
        * **Sponsored rent-exemption**
        * Compress accounts with no writes in 6300 slots (42 min), and decompresses when written to.
        * Must be **added at account creation**
      </td>
    </tr>
  </tbody>
</table>

## Key Points
Compressible accounts maintain the **functionality of Solana accounts** but with **rent-exemption sponsorship**: 

1. Apps and developers can create cToken accounts without funding the rent-exemption balance.
2. The protocol funds the account's rent exemption (rent sponsor) at creation.
3. Transactions that write to compressible accounts fund the accounts rent for a specified number of epochs, instead of the full rent-exemption.
4. The account will be automatically compressed when inactive over a period of 6300 slots (42 min).
5. When the account is written to, it's automatically decompressed.

## Performance comparison
This extension makes cToken accounts 
* 200x cheaper than SPL token accounts
* 70%+ more compute efficient (CU) than SPL on hot paths

<Tabs>
  <Tab title="Creation Cost in SOL">
    |  | cToken | SPL |
    |-----------|--------|-----|
    | allocate | 0.000011 | 0.002 |
    | rent for 24h | 0.000005 | - |
  </Tab>

  <Tab title="Compute Unit Consumption">
    |  | cToken (CU) | SPL (CU) |
    |-----------|-------------|----------|
    | transfer | 312 - 1,885 | ~4,000 |
    | createAssociatedTokenAccount | ~4,300 | ~20,000 |
  </Tab>
</Tabs>

<Tip>
Learn the core concepts or [start building](#create-a-compressible-account).
</Tip>

<Accordion title="Core Concepts: Solana Rent vs Compressible Accounts">

At creation, Solana accounts require an **upfront rent exemption balance** proportional to account size.
The rent-exempt balance is calculated based on 2 years of rent (in lamports):

``` rust
minimum_balance = (ACCOUNT_STORAGE_OVERHEAD + data_len) * lamports_per_byte * exemption_threshold

/// Example 100 byte account: 
/// minimum_balance = (128 + 100) * 6960 = 1,586,880 lamports
```
<Note>
* Most Solana accounts are rarely accessed after creation, but continue to lock up SOL for the account's lifetime.
* The creator still must pay the rent-exemption balance.
</Note>

**Compressible accounts** build on top of Solana's rent system, but use epochs with a length of 6300 slots to calculate rent:
``` rust
rent_per_epoch = base_rent + (data_len * lamports_per_byte_per_epoch)
/// Example 100 byte account:  128 + (100 * 1) = 228 rent per epoch
```
1. The **rent-exemption balance is sponsored by the protocol** to create the account
2. The account requires a carry-balance to stay decompressed. If the balance falls below this threshold for two consecutive epochs, the account becomes compressible.
  * You top up the initial carry-balance for N epochs at account creation. 
  * The lamports amount can be customized based on the expected activity of the account, but must be at least 2 epochs.
  * When the lamports balance drops below the carry-balance for two epochs, the transaction payer of transactions that write to the account top-ups the lamports balance with a specified amount.
3. Accounts become compressible when they advance two epochs without new transactions that add lamports.
4. A forester node compresses the account after these two epochs
  * The protocol reclaims the rent-exemption balance.
  * The left-over lamports balance is returned to the owner.

<Note>
Ideas for 2nd rent term:
- carry 
Meaning: “cost required to hold a position over time.” (finance)

Strength: very short; signals “ongoing cost to maintain an open position.”

Usage:

“account carry”

“carry balance”

Bias: neutral-sophisticated.

---

epoch carry
- represents the cost to keep an account active for one epoch
- similar to "carry" in financial markets
- reflects the ongoing cost of maintaining the account's decompressed state

---

top-up balance
- basically prepaid -> cost to use a service
- signals "advance payment for future usage"
</Note>

</Accordion>

<Accordion title="Fee Structure and Account Closure">

Compressible accounts have two fee components:
1. [Creation costs](#creation-cost) paid by the account creator
2. [Top-up payments](#top-ups-per-transaction) paid by the transactions fee payer (when balance falls below threshold)

When a compressed account is closed, the [rent authority can reclaim the rent](#account-closure).

### Creation Cost

Creating a compressible cToken account (260 bytes) incurs these costs:

<table>
  <thead>
    <tr>
      <th style={{width: '25%', textAlign: 'left'}}>Component</th>
      <th style={{width: '25%', textAlign: 'left'}}>Amount</th>
      <th style={{width: '23%', textAlign: 'left'}}>Paid By</th>
      <th style={{width: '27%', textAlign: 'left'}}>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Solana rent exemption</td>
      <td>~2,700,480 lamports</td>
      <td>Rent sponsor PDA</td>
      <td>Rent-exemption balance</td>
    </tr>
    <tr>
      <td>Prepaid rent</td>
      <td>388 × N epochs*</td>
      <td>Payer <br />(Account creator)</td>
      <td>Rent for N epochs</td>
    </tr>
    <tr>
      <td>Compression incentive</td>
      <td>11,000 lamports</td>
      <td>Payer <br />(Account creator)</td>
      <td>Reserved for future compression</td>
    </tr>
    <tr>
      <td>Transaction fee</td>
      <td>5,000-10,000 lamports</td>
      <td>Payer <br />(Account creator)</td>
      <td>Standard Solana tx fees</td>
    </tr>
  </tbody>
</table>

\* `N` = `num_prepaid_epochs` parameter (0 or 2+, set at creation).

### Top-ups per Transaction

When creating a compressible account, you can configure `lamports_per_write` to automatically add rent on each write ("Top-Up").
This keeps accounts decompressed while active.

The payer's cost depends on the account's funding state:

<table>
  <thead>
    <tr>
      <th style={{width: '30%', textAlign: 'left'}}>Account State</th>
      <th style={{width: '25%', textAlign: 'left'}}>Payer Cost</th>
      <th style={{width: '45%', textAlign: 'left'}}>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Funded for 2+ epochs</td>
      <td>0 lamports</td>
      <td>No top-up required</td>
    </tr>
    <tr>
      <td>Funded for less than 2 epochs</td>
      <td>`lamports_per_write`</td>
      <td>Configured as 5,000 lamports → payer pays 5,000 lamports</td>
    </tr>
    <tr>
      <td>Compressible<br />(ran out of rent)</td>
      <td>`lamports_per_write + rent_deficit`</td>
      <td>Configured top-up: 5,000 lamports<br />Rent deficit: 3,000 lamports<br />Total payer cost: 8,000 lamports</td>
    </tr>
  </tbody>
</table>

<Note>
Top-ups are additional to standard Solana transaction fees (typically &lt;10,000 lamports).
</Note>

### Account Closure

Compressible accounts can be closed by two parties. How rent and lamports balance are distributed depends on which party closes the account.

1. The **Account Owner** can close the account at any time, regardless of rent status. The account is not compressed in this case.

<table>
  <thead>
    <tr>
      <th style={{width: '35%', textAlign: 'left'}}>Component and Amount</th>
      <th style={{width: '35%', textAlign: 'left'}}>Recipient</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Rent exemption + completed epoch rent</td>
      <td>Rent sponsor</td>
    </tr>
    <tr>
      <td>Remaining lamports from top-up (partial epoch)</td>
      <td>Account Owner</td>
    </tr>
  </tbody>
</table>

2. The **Compression Authority** can compress and close the account when it becomes compressible

<table>
  <thead>
    <tr>
      <th style={{width: '35%', textAlign: 'left'}}>Component and Amount</th>
      <th style={{width: '35%', textAlign: 'left'}}>Recipient</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Rent exemption + remaining lamports<br />(all account lamports)</td>
      <td>Rent sponsor</td>
    </tr>
    <tr>
      <td>Compression incentive<br />(11,000 lamports)</td>
      <td>Forester node</td>
    </tr>
  </tbody>
</table>

</Accordion>
## Create a compressible account

When creating a compressible account, you specify:
- **rent_payment**: Number of epochs to prepay (must be at least 2)
- **lamports_per_write**: Amount of lamports added to the account per write operation

### Authority roles

Three distinct authorities control different aspects of a compressible account:

| Authority | Role | Capabilities |
|-----------|------|--------------|
| **Owner** | Controls account tokens/data | Can compress or close account at any time |
| **Compression Authority** | Compress/ Decompress accounts and claim rent | Compress when account is compressible and claims rent for sponsor |
| **Rent Sponsor** | Funds rent exemption | Receives rent payments and exemption refund on account closure; must sign rent top-up transactions |


```rust
/// Compressible extension for cToken accounts and SPL token accounts.
pub struct CompressionInfo {
    pub config_account_version: u16,
    pub compress_to_pubkey: u8,
    pub account_version: u8,
    pub lamports_per_write: u32,
    pub compression_authority: [u8; 32],
    pub rent_sponsor: [u8; 32],
    pub last_claimed_slot: u64,
    pub rent_config: RentConfig,
}
```

## cToken Account with Compressible Extension

```rust expandable
use light_ctoken_types::state::{
    ctoken::CToken,
    extensions::{ExtensionStruct, CompressionInfo},
    AccountState,
};
use light_compressible::rent::RentConfig;

let token_account = CToken {
    mint: mint_pubkey,
    owner: owner_pubkey,
    amount: 0,
    delegate: None,
    state: AccountState::Initialized,
    is_native: None,
    delegated_amount: 0,
    close_authority: None,
    extensions: Some(vec![
        ExtensionStruct::Compressible(CompressionInfo {
            config_account_version: 1,
            compress_to_pubkey: 0,           // Compress to owner (0) or pubkey (1)
            account_version: 3,              // Hashing scheme version
            lamports_per_write: 5000,        // Rent top-up per write
            compression_authority: authority_pubkey.to_bytes(),
            rent_sponsor: sponsor_pubkey.to_bytes(),
            last_claimed_slot: current_slot,
            rent_config: RentConfig::default(),
        })
    ]),
};
```

<Note>
For associated cToken accounts derive the address with [owner, compressed_token_program_id, mint](https://solscan.io/account/cTokenmWW8bLPjZEBAUgYy3zKxQZW6VKi7bqNFEVv3m).
</Note>

## Next Steps

<Card
  title=" Learn about all relevant actions to cMints"
  icon="chevron-right"
  color="#0066ff"
  href="/compressible/mint-actions"
  horizontal
>
</Card>