---
title: Compressed Token Program
sidebarTitle: Compressed Token Program
description: Overview of cMints, cTokens, and compressed token accounts.
---

# Overview

The [Compressed Token Program](https://github.com/Lightprotocol/light-protocol/tree/main/programs/compressed-token) extends existing Solana token standards and is **fully compatible with SPL mints and tokens**.

<Tip>
**Mint and token accounts** owned by the [Token Program](https://github.com/solana-program/token) or [Token-2022](https://github.com/solana-program/token-2022) 
**require rent** by default. Use the **[compressible extension](#compressible) to optimize rent** of token accounts.
</Tip>

<table>
  <thead>
    <tr>
      <th style={{width: '15%', textAlign: 'left'}}></th>
      <th style={{width: '25%', textAlign: 'left'}}>Account Type</th>
      <th style={{width: '60%', textAlign: 'left'}}>Key Features</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style={{textAlign: 'left'}}>**[cMint](#cmint-accounts)**</td>
      <td style={{textAlign: 'left'}}>Compressed account</td>
      <td style={{textAlign: 'left'}}>
        <ul>
          <li>Rent-free SPL mints</li>
          <li>Optional **extension** field for [Token Metadata](#token-metadata)</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style={{textAlign: 'left'}}>**[cToken](#ctoken-account)**</td>
      <td style={{textAlign: 'left'}}>Solana account</td>
      <td style={{textAlign: 'left'}}>
        <ul>
          <li>Similar to SPL token accounts, derived from cMints</li>
          <li>Optional extension field to optimize rent with the [compressible extension](#compressible)</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style={{textAlign: 'left'}}>**[Compressed Token](#compressed-token-account)**</td>
      <td style={{textAlign: 'left'}}>Compressed account</td>
      <td style={{textAlign: 'left'}}>
        <ul>
          <li>Compressed Solana accounts with `TokenData` field</li>
          <li>SPL compatible layout</li>
          <li>Can be decompressed at will</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

# cMint Accounts

cMint accounts **store data and uniquely identify tokens**, similar to SPL mint accounts with two core differences:
1. Tokens created from cMints are **cTokens** (fully compatible with SPL tokens)
2. cMints support [Token Metadata](compressible/token-metadata) as optional and only extension.

<Tip>
* *cMint accounts* are compressed accounts and *cannot be decompressed*. 
* SPL mints can not be compressed to cMints. 
</Tip>

<Info>
add graphic
</Info>

The `BaseMint` field mirrors the layout of [SPL Mint accounts](https://solana.com/docs/tokens#mint-account).
* Both serialize to 82 bytes with identical byte layouts. 
* `BaseMint` uses standard Rust types which are automatically converted to SPL-compatible format. 

<table>
  <thead>
    <tr>
      <th style={{width: '50%'}}>Field</th>
      <th style={{width: '25%', textAlign: 'center'}}>cMint (BaseMint)</th>
      <th style={{width: '25%', textAlign: 'center'}}>SPL Mint</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>mint_authority</td>
      <td style={{textAlign: 'center'}}>✓</td>
      <td style={{textAlign: 'center'}}>✓</td>
    </tr>
    <tr>
      <td>supply</td>
      <td style={{textAlign: 'center'}}>✓</td>
      <td style={{textAlign: 'center'}}>✓</td>
    </tr>
    <tr>
      <td>decimals</td>
      <td style={{textAlign: 'center'}}>✓</td>
      <td style={{textAlign: 'center'}}>✓</td>
    </tr>
    <tr>
      <td>is_initialized</td>
      <td style={{textAlign: 'center'}}>✓</td>
      <td style={{textAlign: 'center'}}>✓</td>
    </tr>
    <tr>
      <td>freeze_authority</td>
      <td style={{textAlign: 'center'}}>✓</td>
      <td style={{textAlign: 'center'}}>✓</td>
    </tr>
  </tbody>
</table>

Here are the full details of a cMint:

```rust
pub struct CompressedMint {
    // SPL mint layout
    pub base: BaseMint,                           
    // cMint state used by the Compressed Token Program
    pub metadata: CompressedMintMetadata
    // Field for Token Metadata extension
    pub extensions: Option<Vec<ExtensionStruct>>, 
}
```


# cToken Account

<Tip>
* cToken accounts are Solana accounts, not compressed accounts.
* cToken accounts can include a compressible extension to optimize rent
</Tip>

A cToken account holds token balances and mirrors SPL Token accounts for full compatibility:
* A wallet needs a cToken account for each cMint it wants to hold, with the wallet address set as the cToken account owner.
* Each wallet can own multiple cToken accounts for the same cMint.
* A cToken account can only have one owner and hold units of one cMint.

```rust
/// Ctoken account structure (with extensions).
pub struct CToken {
    pub mint: Pubkey,
    pub owner: Pubkey,
    pub amount: u64,
    pub delegate: Option<Pubkey>, // instruction not implemented yet
    pub state: u8,
    pub is_native: Option<u64>,
    pub delegated_amount: u64, // instruction not implemented yet
    pub close_authority: Option<Pubkey>,
    pub extensions: Option<Vec<ExtensionStruct>>, // Optional extensions e.g. compressible
}
```

<Accordion title="SPL Token Account Structure">

```rust
pub struct Account {
    pub mint: Pubkey,
    pub owner: Pubkey,
    pub amount: u64,
    pub delegate: COption<Pubkey>,
    pub state: AccountState,
    pub is_native: COption<u64>,
    pub delegated_amount: u64,
    pub close_authority: COption<Pubkey>,
}
```
</Accordion>


### cToken Account with Compressible Extension

add more explainer

```rust expandable
use light_ctoken_types::state::{
    ctoken::CToken,
    extensions::{ExtensionStruct, CompressionInfo},
    AccountState,
};
use light_compressible::rent::RentConfig;

// Complete CToken account with Compressible extension
let ctoken = CToken {
    mint: mint_pubkey,
    owner: owner_pubkey,
    amount: 1000,                            
    delegate: None,                          
    state: AccountState::Initialized,        
    is_native: None,                         
    delegated_amount: 0,                     
    close_authority: None,                   // No close authority set
    extensions: Some(vec![
        ExtensionStruct::Compressible(CompressionInfo {
            config_account_version: 1,
            compress_to_pubkey: 0,           
            account_version: 3,              
            lamports_per_write: 5000,
            compression_authority: authority_pubkey.to_bytes(),
            rent_sponsor: sponsor_pubkey.to_bytes(),
            last_claimed_slot: current_slot,
            rent_config: RentConfig::default(),
        })
    ]),
};
```

# Associated cToken Account

Associated cToken accounts follow the same pattern as [associated token accounts](https://docs.solana.com/developing/programming-model/associated-token-account):
* It's derived from the owner's address and the cMint account's address.
* Each wallet needs its own cToken account to hold tokens from the same cMint.

SPL and cToken ATAs are derived differently: 
* SPL ATA address: `derive_ata(owner,SPL_TOKEN_PROGRAM_ID, mint)`
* cToken ATA address: `derive_ctoken_ata(owner,COMPRESSED_TOKEN_PROGRAM_ID, mint)`

<Tip>
Both can implement the **compressible extension to automatically compress** accounts when inactive and decompress, when hot to **optimize rent**.
</Tip>

# Compressed Token Account

<Info>
Compressed token accounts are stored as `TokenData` in compressed accounts.
</Info>

Compressed token accounts store token balance, owner, and other information for SPL tokens and cTokens.
* Existing SPL tokens can be compressed without migrating to cMints.
* Any cToken or SPL token can be compressed at will. 

<Tip>
Use the **compressible extension to automatically compress** accounts when inactive and decompress, when hot to **optimize rent**.
</Tip>

```rust
pub struct TokenData {
    pub mint: Pubkey,           
    pub owner: Pubkey,          
    pub amount: u64,            
    pub delegate: Option<Pubkey>,
    pub state: u8,              
    /// Placeholder for TokenExtension tlv data (unimplemented)
    pub tlv: Option<Vec<u8>>,
}
```

# Next Steps

<Card
  title=" Learn how to use the Compressible Extension"
  icon="chevron-right"
  color="#0066ff"
  href="/compressible/extensions"
  horizontal
>
</Card>