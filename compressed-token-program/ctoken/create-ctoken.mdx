---
title: Create a cToken Account with Compressible Extension
description: Guide to create a cToken account with compressible extension.
---

import CompressibleVsSolanaRent from '/snippets/compressible-vs-solana-rent.mdx';

<table>
  <thead>
    <tr>
      <th style={{width: '15%', textAlign: 'left'}}></th>
      <th style={{width: '22%', textAlign: 'left'}}>Type</th>
      <th style={{width: '63%', textAlign: 'left'}}>Key Features</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style={{textAlign: 'left'}}>**[cMint](#cmint-accounts)**</td>
      <td style={{textAlign: 'left'}}>Solana account</td>
      <td style={{textAlign: 'left'}}>
        <ul>
          <li>**SPL-compatible**</li>
          <li>Use for **active token accounts** with frequent writes (trading, etc.)</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style={{textAlign: 'left'}}>**[Compressible](#compressible)**</td>
      <td>Extension</td>  
      <td style={{textAlign: 'left'}}>
        <ul>
          <li>**Sponsored rent-exemption** makes cTokens 200x cheaper than SPL tokens</li>
          <li>Must be added at creation of cToken</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>


<Info>
Learn the core concepts to cTokens and compressible extension [here](/compressed-token-program/c-token-program#ctoken-accounts).
</Info>

<CompressibleVsSolanaRent />

## Get Started

<Steps>

<Step>
### Initialize cToken Account


</Step>

<Step>
### Configure Compressible Extension
1. **Set the initial lamports balance** to N epochs (must be at least 2 epochs)
   * Customize N **based on expected account activity**.
   * You will top-up the account with rent for N epochs and it stays decompressed.
``` rust
rent_per_epoch = base_rent + (data_len * lamports_per_byte_per_epoch)

// For 260-byte cToken account: 
// 128 + (260 * 1) = 388 lamports per epoch
```

2. **Set the top-up amount** for writes when the account balance falls below the set lamports balance.
   * Determines how much lamports are added when the account needs a top-up.
   * Top-ups are made by the **transaction fee payer** when the account is written to and is below the set lamports balance.

<Note>
* Accounts become compressible when they advance two epochs without new transactions that add lamports.
* A forester node compresses the account after these two epochs and the protocol can reclaim the rent.
</Note>
</Step>

<Step>
### Full Code Example

```rust 
use light_token_client::actions::{
    create_compressible_token_account,
    CreateCompressibleTokenAccountInputs,
};
use light_ctoken_types::state::TokenDataVersion;

let token_account_pubkey = create_compressible_token_account(
    &mut rpc,
    CreateCompressibleTokenAccountInputs {
        owner: owner_pubkey,
        mint: mint_pubkey,
        payer: &payer_keypair,
        num_prepaid_epochs: 10,  // 0 or â‰¥2
        lamports_per_write: Some(5_000), // lamports added per top-up
        token_account_version: TokenDataVersion::ShaFlat,
        token_account_keypair: None,  // SDK generates keypair
    }
).await?;
```

<Note>
For associated cToken accounts derive the address with [owner, compressed_token_program_id, mint](https://solscan.io/account/cTokenmWW8bLPjZEBAUgYy3zKxQZW6VKi7bqNFEVv3m).
</Note>

</Step>

</Steps>

## Next Steps

<Card
  title=" Learn about all relevant actions to cMints"
  icon="chevron-right"
  color="#0066ff"
  href="/compressible/mint-actions"
  horizontal
>
</Card>