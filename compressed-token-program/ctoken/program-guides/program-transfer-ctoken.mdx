---
title: Transfer cTokens
description: Program guide to transfer cTokens between accounts with step-by-step implementation and full code examples.
---

## Key Points

cToken transfers are executed via CPI to the cToken Program.

1. Transfer moves token balances between cToken accounts.
2. The source account owner must sign the transaction (or be a PDA with invoke_signed).
3. Simple interface: source, destination, amount, authority.

<Info>
Learn the [core concepts to the cToken Program here](/compressed-token-program/c-token-program).
</Info>

<Note>
Find [full code examples at the end](#full-code-example).
</Note>

# Implementation Guide

<Steps>
<Step>

### cToken Program CPI

Build the transfer instruction and invoke the cToken Program.

* When a CPI doesn't require PDA signers, the `invoke` function is used.
* When a CPI requires a PDA signer, the `invoke_signed` function is used.

<Tabs>
<Tab title="invoke (External Signer)">

```rust
use light_compressed_token_sdk::ctoken::TransferCtokenAccountInfos;

TransferCtokenAccountInfos {
    source: source.clone(),
    destination: destination.clone(),
    amount: data.amount,
    authority: authority.clone(),
}
.invoke()?;
```

</Tab>
<Tab title="invoke_signed (PDA Authority)">

```rust
use light_compressed_token_sdk::ctoken::TransferCtokenAccountInfos;

let transfer_accounts = TransferCtokenAccountInfos {
    source: source.clone(),
    destination: destination.clone(),
    amount: data.amount,
    authority: authority.clone(),
};

let signer_seeds: &[&[u8]] = &[TOKEN_ACCOUNT_SEED, &[bump]];
transfer_accounts.invoke_signed(&[signer_seeds])?;
```

</Tab>
</Tabs>

</Step>
</Steps>

# Full Code Example

<Info>
Find the source code [here](https://github.com/Lightprotocol/light-protocol/blob/main/sdk-tests/sdk-ctoken-test/src/transfer.rs).
</Info>

```rust expandable
use borsh::{BorshDeserialize, BorshSerialize};
use light_compressed_token_sdk::ctoken::TransferCtokenAccountInfos;
use solana_program::{account_info::AccountInfo, program_error::ProgramError, pubkey::Pubkey};

use crate::{ID, TOKEN_ACCOUNT_SEED};

/// Instruction data for transfer operations
#[derive(BorshSerialize, BorshDeserialize, Debug)]
pub struct TransferData {
    pub amount: u64,
}

/// Handler for transferring compressed tokens (invoke)
///
/// Account order:
/// - accounts[0]: source ctoken account
/// - accounts[1]: destination ctoken account
/// - accounts[2]: authority (signer)
pub fn process_transfer_invoke(
    accounts: &[AccountInfo],
    data: TransferData,
) -> Result<(), ProgramError> {
    if accounts.len() < 3 {
        return Err(ProgramError::NotEnoughAccountKeys);
    }

    TransferCtokenAccountInfos {
        source: accounts[0].clone(),
        destination: accounts[1].clone(),
        amount: data.amount,
        authority: accounts[2].clone(),
    }
    .invoke()?;

    Ok(())
}

/// Handler for transferring compressed tokens from PDA-owned account (invoke_signed)
///
/// Account order:
/// - accounts[0]: source ctoken account (PDA-owned)
/// - accounts[1]: destination ctoken account
/// - accounts[2]: authority (PDA)
pub fn process_transfer_invoke_signed(
    accounts: &[AccountInfo],
    data: TransferData,
) -> Result<(), ProgramError> {
    if accounts.len() < 3 {
        return Err(ProgramError::NotEnoughAccountKeys);
    }

    // Derive the PDA for the authority
    let (pda, bump) = Pubkey::find_program_address(&[TOKEN_ACCOUNT_SEED], &ID);

    // Verify the authority account is the PDA
    if &pda != accounts[2].key {
        return Err(ProgramError::InvalidSeeds);
    }

    let transfer_accounts = TransferCtokenAccountInfos {
        source: accounts[0].clone(),
        destination: accounts[1].clone(),
        amount: data.amount,
        authority: accounts[2].clone(),
    };

    // Invoke with PDA signing
    let signer_seeds: &[&[u8]] = &[TOKEN_ACCOUNT_SEED, &[bump]];
    transfer_accounts.invoke_signed(&[signer_seeds])?;

    Ok(())
}
```

# Next Steps

<Card
  title="Learn how to close cToken accounts"
  icon="chevron-right"
  color="#0066ff"
  href="/compressed-token-program/ctoken/program-guides/program-close-ctoken"
  horizontal
/>