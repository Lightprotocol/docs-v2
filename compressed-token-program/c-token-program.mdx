---
title: Compressed Token Program
sidebarTitle: Overview New
description: Overview of cMints, cTokens, and compressed token accounts.
---

import CompressibleVsSolanaRent from '/snippets/compressible-vs-solana-rent.mdx';

The [Compressed Token Program](https://github.com/Lightprotocol/light-protocol/tree/main/programs/compressed-token) extends existing Solana token standards with cMints, cTokens and compressed tokens.

<table>
  <thead>
    <tr>
      <th style={{width: '15%', textAlign: 'left'}}></th>
      <th style={{width: '22%', textAlign: 'left'}}>Account Type</th>
      <th style={{width: '63%', textAlign: 'left'}}>Key Features</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style={{textAlign: 'left'}}>**[cMint](#cmint-accounts)**</td>
      <td style={{textAlign: 'left'}}>Compressed account</td>
      <td style={{textAlign: 'left'}}>
        <ul>
          <li>**Rent-free mint accounts** (similar to SPL mints)</li>
          <li>Custom [Token Metadata](#token-metadata) **extension**</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style={{textAlign: 'left'}}>**[cToken](#ctoken-account)**</td>
      <td style={{textAlign: 'left'}}>Solana account</td>
      <td style={{textAlign: 'left'}}>
        <ul>
          <li>**Token accounts** derived from cMints (**SPL-compatible**)</li>
          <li>**Sponsored rent** exemption via [compressible extension](#compressible) (200x cheaper than SPL tokens)</li>
          <li>Use for **active token accounts** with frequent writes (trading, etc.)</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td style={{textAlign: 'left'}}>**[Compressed Token](#compressed-token-account)**</td>
      <td style={{textAlign: 'left'}}>Compressed account</td>
      <td style={{textAlign: 'left'}}>
        <ul>
          <li>**Compressed account** with `TokenData` field</li>
          <li>**Rent-free** and SPL-compatible</li>
          <li>Use for **storage of inactive tokens** or **token distribution**</li>
          <li>cToken accounts with the **[compressible extension](#compressible) are automatically compressed/decompressed** when active/inactive.</li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

_add graphic of all tokens here_


<Tip>
**SPL mints and tokens** owned by the [Token Program](https://github.com/solana-program/token) or [Token-2022](https://github.com/solana-program/token-2022) **require rent** by default.<br /> 
You can **migrate SPL token accounts to cTokens** with compressible extension for **sponsored rent-exemption** while keeping the **same interoparability**.
</Tip>

# cMint Accounts

<Note>
* **cMints are compressed accounts** and **cannot be decompressed**. 
* SPL mints can not be compressed to cMints. 
</Note>

cMints **uniquely represent a token on Solana and store its global metadata**, similar to SPL mint accounts with few core differences:
1. cMint accounts are **rent-free**.
2. Tokens created from cMints are **cTokens** (fully compatible with SPL tokens).
3. Token metadata (name, symbol, URI) is stored as an extension within the compressed mint account.

<Tabs>
  <Tab title="Diagram">
    <Frame>
      <img
        src="/images/token-explainer.png"
        alt="Diagram showing cMint compressed account structure with three components: Hash (identifier for cMint in purple box), Account (struct containing BaseMint with SPL-compatible fields, cMint Data for program state, and optional Extensions for Token Metadata), and BasemintData (containing Supply, Decimals, Mint Authority, and Freeze Authority fields) with Token Metadata extension"
      />
    </Frame>
  </Tab>
  <Tab title="Source Code">
    ```rust
    pub struct CompressedMint {
        // SPL mint layout
        pub base: BaseMint,
        // cMint state used by the Compressed Token Program
        pub metadata: CompressedMintMetadata
        // Field for Token Metadata extension
        pub extensions: Option<Vec<ExtensionStruct>>,
    }
    ```
  </Tab>
</Tabs>

<Info>
Find the [source code of cMints here](https://github.com/Lightprotocol/light-protocol/blob/main/program-libs/ctoken-types/src/state/mint/compressed_mint.rs).
</Info>

The `metadata` field is used by the Compressed Token Program to store the internal state of a cMint.

The `BaseMint` field replicates the field layout and serialization format of [SPL Mint accounts](https://solana.com/docs/tokens#mint-account). The struct is serialized with Borsh to match the on-chain format of SPL tokens and mints.

Here is how cMints and SPL mints compare:

<Tabs>
  <Tab title="Basemint vs SPL mint">
    <table>
      <thead>
        <tr>
          <th style={{width: '10%', textAlign: 'left'}}>Field</th>
          <th style={{width: '45%', textAlign: 'center'}}>cMint</th>
          <th style={{width: '30%', textAlign: 'center'}}>SPL Mint</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>mint_authority</td>
          <td style={{textAlign: 'center'}}>✓</td>
          <td style={{textAlign: 'center'}}>✓</td>
        </tr>
        <tr>
          <td>supply</td>
          <td style={{textAlign: 'center'}}>✓</td>
          <td style={{textAlign: 'center'}}>✓</td>
        </tr>
        <tr>
          <td>decimals</td>
          <td style={{textAlign: 'center'}}>✓</td>
          <td style={{textAlign: 'center'}}>✓</td>
        </tr>
        <tr>
          <td>is_initialized</td>
          <td style={{textAlign: 'center'}}>✓</td>
          <td style={{textAlign: 'center'}}>✓</td>
        </tr>
        <tr>
          <td>freeze_authority</td>
          <td style={{textAlign: 'center'}}>✓</td>
          <td style={{textAlign: 'center'}}>✓</td>
        </tr>
        <tr>
          <td>cMint Data</td>
          <td style={{textAlign: 'center'}}>✓</td>
          <td style={{textAlign: 'center'}}>-</td>
        </tr>
        <tr>
          <td>Extensions</td>
          <td style={{textAlign: 'center'}}>✓</td>
          <td style={{textAlign: 'center'}}>via Token-2022</td>
        </tr>
      </tbody>
    </table>
  </Tab>
  <Tab title="BaseMint Struct">
    ```rust
    pub struct BaseMint {
        /// Optional authority used to mint new tokens. The mint authority may only
        /// be provided during mint creation. If no mint authority is present
        /// then the mint has a fixed supply and no further tokens may be
        /// minted.
        pub mint_authority: Option<Pubkey>,
        /// Total supply of tokens.
        pub supply: u64,
        /// Number of base 10 digits to the right of the decimal place.
        pub decimals: u8,
        /// Is initialized - for SPL compatibility
        pub is_initialized: bool,
        /// Optional authority to freeze token accounts.
        pub freeze_authority: Option<Pubkey>,
    }
    ```
  </Tab>
</Tabs>

# cToken Account

<Note>
**cToken accounts are Solana accounts**, not compressed accounts.
</Note>

A cToken account holds token balances like SPL Token accounts:
* A wallet needs a cToken account for each cMint it wants to hold, with the wallet address set as the cToken account owner.
* Each wallet can own multiple cToken accounts for the same cMint.
* A cToken account can only have one owner and hold units of one cMint.

<Tabs>
  <Tab title="Diagram">
    <Frame>
      <img
        src="/images/ctoken-explainer.png"
        alt="Diagram showing cToken Solana account structure with three components: Address (identifier for cToken account in purple box), Account (struct containing Data bytes, Executable flag, Lamports balance, and Owner set to Compressed Token Program), and AccountData (containing Mint, Owner, Amount, and Extensions fields)"
      />
    </Frame>
  </Tab>
  <Tab title="Source Code">
    ```rust
    /// Ctoken account structure (with extensions).
    pub struct CToken {
        pub mint: Pubkey,
        pub owner: Pubkey,
        pub amount: u64,
        pub delegate: Option<Pubkey>, // instruction not implemented yet
        pub state: u8,
        pub is_native: Option<u64>,
        pub delegated_amount: u64, // instruction not implemented yet
        pub close_authority: Option<Pubkey>,
        pub extensions: Option<Vec<ExtensionStruct>>, // Optional extensions e.g. compressible
    }
    ```
  </Tab>
</Tabs>

<Info>
Find the [source code of cToken here](https://github.com/Lightprotocol/light-protocol/blob/main/program-libs/ctoken-types/src/state/ctoken/ctoken_struct.rs).
</Info>

cToken accounts replicate the field layout and serialization format of [SPL Token accounts](https://solana.com/docs/tokens#token-account). The struct is serialized with Borsh to match the on-chain format of SPL tokens.

Here is how cTokens and SPL tokens compare:
<table>
  <thead>
    <tr>
      <th style={{width: '10%', textAlign: 'left'}}>Field</th>
      <th style={{width: '45%', textAlign: 'center'}}>cToken</th>
      <th style={{width: '30%', textAlign: 'center'}}>SPL Token Account</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>mint</td>
      <td style={{textAlign: 'center'}}>✓</td>
      <td style={{textAlign: 'center'}}>✓</td>
    </tr>
    <tr>
      <td>owner</td>
      <td style={{textAlign: 'center'}}>✓</td>
      <td style={{textAlign: 'center'}}>✓</td>
    </tr>
    <tr>
      <td>amount</td>
      <td style={{textAlign: 'center'}}>✓</td>
      <td style={{textAlign: 'center'}}>✓</td>
    </tr>
    <tr>
      <td>delegate</td>
      <td style={{textAlign: 'center'}}>unimplemented</td>
      <td style={{textAlign: 'center'}}>✓</td>
    </tr>
    <tr>
      <td>state</td>
      <td style={{textAlign: 'center'}}>✓</td>
      <td style={{textAlign: 'center'}}>✓</td>
    </tr>
    <tr>
      <td>is_native</td>
      <td style={{textAlign: 'center'}}>✓</td>
      <td style={{textAlign: 'center'}}>✓</td>
    </tr>
    <tr>
      <td>delegated_amount</td>
      <td style={{textAlign: 'center'}}>unimplemented</td>
      <td style={{textAlign: 'center'}}>✓</td>
    </tr>
    <tr>
      <td>close_authority</td>
      <td style={{textAlign: 'center'}}>✓</td>
      <td style={{textAlign: 'center'}}>✓</td>
    </tr>
    <tr>
      <td>extensions</td>
      <td style={{textAlign: 'center'}}>✓</td>
      <td style={{textAlign: 'center'}}>via Token-2022</td>
    </tr>
  </tbody>
</table>

### Compressible Extension

cToken accounts include the compressible extension with rent-exemption sponsorship:

1. The protocol funds the account's rent exemption at creation.
2. The account creator top-ups the lamport balance with rent for at least two epochs (12,600 slots / 84 min)
3. The transaction payer top-ups the lamports balance when the account's lamports balance is below 2 epochs.
4. The account will be compressed when inactive for a period of 12,600 slots (84 min).
5. When the account is written to, it's automatically decompressed.

This extension makes cToken accounts 200x cheaper than SPL token accounts

    |  | cToken | SPL |
    |-----------|--------|-----|
    | allocate | 0.000011 | 0.002 |
    | rent for 24h | 0.000005 | - |


<Accordion title="Compressible vs Solana Rent">

<CompressibleVsSolanaRent />
</Accordion>

# Associated cToken Account

**Associated cToken** accounts follow the same pattern as [associated token accounts](https://docs.solana.com/developing/programming-model/associated-token-account) (ATA):
* Each wallet needs its own cToken account to hold tokens from the same cMint.
* It's derived with the owner's address, program ID, and mint address.
* The only **difference** in ATA derivation is the **program ID parameter** used in the seeds.


```rust
let seeds = [
    owner.as_ref(),          // Wallet address (32 bytes)
    program_id.as_ref(),     // Compressed Token Program ID (32 bytes)
    mint.as_ref(),           // cMint address (32 bytes)
    bump.as_ref(),           // Bump seed (1 byte)
];
```

<Info>
Find the [source code to associated cToken accounts here](https://github.com/Lightprotocol/light-protocol/blob/main/programs/compressed-token/program/src/create_associated_token_account.rs).
</Info>

<Tip>
cToken ATAs can implement the **[compressible extension](/compressible/compressible) for sponsored rent exemption**.
</Tip>

# Compressed Token Account

Compressed token accounts store token balance, owner, and other information like SPL and cTokens. Any cToken or SPL token can be compressed/decompressed at will.

We recommend to use compressed tokens for **token distribution** or **storage of inactive tokens**.

<Tip>
**cToken accounts** with the **[compressible extension](/compressible/compressible) are automatically compressed** with no writes in 12,600 slots (84 min) and decompressed with new writes.
</Tip>

<Tabs>
  <Tab title="Diagram">
    <Frame>
      <img
        src="/images/compressed-token-explainer.png"
        alt="Diagram showing compressed token account structure with three components: Hash (identifier for compressed token account in purple box), Account (struct containing Data bytes, Executable flag, Lamports balance, and Address set to None), and AccountData (containing Mint, Owner, Amount, and Extensions fields marked as unimplemented)"
      />
    </Frame>
  </Tab>
  <Tab title="Source Code">
    ```rust
    pub struct TokenData {
        pub mint: Pubkey,
        pub owner: Pubkey,
        pub amount: u64,
        pub delegate: Option<Pubkey>,
        pub state: u8,
        /// Placeholder for TokenExtension tlv data (unimplemented)
        pub tlv: Option<Vec<u8>>,
    }
    ```
  </Tab>
</Tabs>

# Next Steps

<Card
  title=" Learn how to create cMints"
  icon="chevron-right"
  color="#0066ff"
  href="/compressible/mint-actions"
  horizontal
>
</Card>