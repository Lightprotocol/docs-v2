```typescript
import { useState } from 'react';
import { PublicKey, Transaction, ComputeBudgetProgram } from '@solana/web3.js';
import { getAssociatedTokenAddressSync } from '@solana/spl-token';
import { CompressedTokenProgram, getSplInterfaceInfos, selectSplInterfaceInfo } from '@lightprotocol/compressed-token';
import { bn, selectStateTreeInfo } from '@lightprotocol/stateless.js';
import { getRpc } from '../lib/rpc';

export interface BuildCompressParams {
  ownerPublicKey: string;
  mint: string;
  toAddress: string;
  amount: number;
  decimals?: number;
}

export function useBuildCompress() {
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  const buildCompressTx = async (params: BuildCompressParams): Promise<Transaction> => {
    setIsLoading(true);
    setError(null);

    try {
      const { ownerPublicKey, mint, toAddress, amount, decimals = 6 } = params;
      const rpc = getRpc();
      const owner = new PublicKey(ownerPublicKey);
      const mintPubkey = new PublicKey(mint);
      const recipient = new PublicKey(toAddress);
      const tokenAmount = bn(Math.floor(amount * Math.pow(10, decimals)));

      // Get source ATA
      const sourceAta = getAssociatedTokenAddressSync(mintPubkey, owner);

      // Get state tree and token pool info
      const stateTreeInfos = await rpc.getStateTreeInfos();
      const selectedTreeInfo = selectStateTreeInfo(stateTreeInfos);
      const splInterfaceInfos = await getSplInterfaceInfos(rpc, mintPubkey);
      const tokenPoolInfo = selectSplInterfaceInfo(splInterfaceInfos);

      // Build compress instruction
      const compressIx = await CompressedTokenProgram.compress({
        payer: owner,
        owner,
        source: sourceAta,
        toAddress: recipient,
        mint: mintPubkey,
        amount: tokenAmount,
        outputStateTreeInfo: selectedTreeInfo,
        tokenPoolInfo,
      });

      // Build transaction
      const { blockhash } = await rpc.getLatestBlockhash();
      const transaction = new Transaction();
      transaction.add(ComputeBudgetProgram.setComputeUnitLimit({ units: 300_000 }));
      transaction.add(compressIx);
      transaction.recentBlockhash = blockhash;
      transaction.feePayer = owner;

      setIsLoading(false);
      return transaction;
    } catch (err) {
      const errorMessage = err instanceof Error ? err.message : String(err);
      setError(errorMessage);
      setIsLoading(false);
      throw err;
    }
  };

  return { buildCompressTx, isLoading, error };
}
```