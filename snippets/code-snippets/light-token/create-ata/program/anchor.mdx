```rust
#![allow(unexpected_cfgs)]

use anchor_lang::prelude::*;
use light_token_sdk::token::{CreateAssociatedAccountCpi, CompressibleParamsCpi};

declare_id!("77bt3j6A3g9s1WtwYnRFTGP9y8H1nigW7mLtywGKPmMi");

#[program]
pub mod light_token_anchor_create_ata {
    use super::*;

    pub fn create_ata<'info>(
        ctx: Context<'_, '_, '_, 'info, CreateAtaAccounts<'info>>,
        bump: u8,
        idempotent: bool,
    ) -> Result<()> {
        let compressible = CompressibleParamsCpi::new_ata(
            ctx.accounts.compressible_config.to_account_info(),
            ctx.accounts.rent_sponsor.to_account_info(),
            ctx.accounts.system_program.to_account_info(),
        );

        CreateAssociatedAccountCpi {
            owner: ctx.accounts.owner.to_account_info(),
            mint: ctx.accounts.mint.to_account_info(),
            payer: ctx.accounts.payer.to_account_info(),
            associated_token_account: ctx.accounts.associated_token_account.to_account_info(),
            system_program: ctx.accounts.system_program.to_account_info(),
            bump,
            compressible,
            idempotent,
        }
        .invoke()?;
        Ok(())
    }
}

#[derive(Accounts)]
pub struct CreateAtaAccounts<'info> {
    /// CHECK: Validated by light-token CPI
    pub owner: AccountInfo<'info>,
    /// CHECK: Validated by light-token CPI
    pub mint: AccountInfo<'info>,
    #[account(mut)]
    pub payer: Signer<'info>,
    /// CHECK: Validated by light-token CPI
    #[account(mut)]
    pub associated_token_account: AccountInfo<'info>,
    pub system_program: Program<'info, System>,
    /// CHECK: Validated by light-token CPI
    pub compressible_config: AccountInfo<'info>,
    /// CHECK: Validated by light-token CPI
    #[account(mut)]
    pub rent_sponsor: AccountInfo<'info>,
}
```
